@model PanelViewModel

@{
    ViewData["Title"] = "Web API";
    var activePanel = ViewBag.ActivePanel ?? "panel1";
}

<script>
    $( document ).ready( function ()
    {
        $( "#apiDropdown" ).change( function ()
        {
            var selectedValue = $( this ).val();

            if ( selectedValue )
            {
                $.ajax( {
                    url: '/Home/GetData', // Controller action
                    type: 'GET',
                    data: { apiType: selectedValue },
                    success: function ( data )
                    {
                        $( "#result" ).html( "<pre>" + JSON.stringify( data, null, 2 ) + "</pre>" );
                    },
                    error: function ( xhr, status, error )
                    {
                        $( "#result" ).html( "<p style='color: red;'>Error: " + xhr.responseText + "</p>" );
                    }
                } );
            } else
            {
                $( "#result" ).html( "" ); // Clear result if no selection
            }
        } );
    } );
</script>

@{
   
}
<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Choose an API endpoint that you want to call and let the magic begin.</p>

    <select id="apiDropdown">
        <option value="">--Select an API--</option>
        <option value="api1">API 1</option>
        <option value="api2">API 2</option>
    </select>

    <!-- Dropdown for selecting panels -->
    <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
            Select Panel
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <li>
                <form method="get" action="/Home/Index" style="display: inline;">
                    <input type="hidden" name="panel" value="panel1" />
                    <button type="submit" class="dropdown-item">Panel 1</button>
                </form>
            </li>
            <li>
                <form method="get" action="/Home/Index" style="display: inline;">
                    <input type="hidden" name="panel" value="panel2" />
                    <button type="submit" class="dropdown-item">Panel 2</button>
                </form>
            </li>
            <li>
                <form method="get" action="/Home/Index" style="display: inline;">
                    <input type="hidden" name="panel" value="panel3" />
                    <button type="submit" class="dropdown-item">Panel 3</button>
                </form>
            </li>
        </ul>
    </div>

    <div style="margin-top: 20px; border: 1px solid #ccc; padding: 15px;">
        @if (activePanel == "panel1")
        {
            <div id="panel1" class="panel">
                <h2>Panel 1 Content</h2>
                <p>This is the content for panel 1.</p>
            </div>
        }
        else if (activePanel == "panel2")
        {
            <div id="panel2" class="panel">
                <h2>Panel 2 Content</h2>
                <p>This is the content for panel 2.</p>
            </div>
        }
        else if (activePanel == "panel3")
        {
            <div id="panel3" class="panel">
                <h2>Panel 3 Content</h2>
                <p>This is the content for panel 3.</p>
            </div>
        }
        else
        {
            <div id="defaultPanel" class="panel">
                <h2>Default Panel</h2>
                <p>No panel selected.</p>
            </div>
        }
    </div>

</div>


<div>

</div>
